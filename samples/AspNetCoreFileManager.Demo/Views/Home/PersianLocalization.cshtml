@{
    ViewData["Title"] = "ูุงุฑุณโุณุงุฒ - Persian Localization";
}
@section PageHead {
<link rel="stylesheet" href="~/lib/VazirMatn/Vazirmatn.css">
}
<style>
    .demo-section {
        margin-bottom: 2rem;
    }
    .code-block {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 0.25rem;
        padding: 0;
    }
    .code-block pre {
        margin: 0;
        padding: 1rem;
        overflow-x: auto;
    }
    .code-block code {
        color: #212529;
        font-size: 0.875rem;
    }
    
    /* Fix button group in RTL - swap border radius */
    [dir="rtl"] .btn-group .btn {
        border-radius: 0;
    }
    
    [dir="rtl"] .btn-group .btn:first-child {
        border-top-right-radius: 0.375rem;
        border-bottom-right-radius: 0.375rem;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
    }
    
    [dir="rtl"] .btn-group .btn:last-child {
        border-top-left-radius: 0.375rem;
        border-bottom-left-radius: 0.375rem;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
    }
    
    /* Fix button borders in RTL */
    [dir="rtl"] .btn-group .btn:not(:last-child) {
        border-left: 0;
        border-right: 1px solid rgba(0, 0, 0, 0.125);
    }
    
    [dir="rtl"] .btn-group .btn:not(:first-child) {
        margin-left: 0;
        border-right: 0;
    }
</style>

<div class="container my-5" dir="rtl">
    <h1 class="mb-4">ููููู ูุงุฑุณโุณุงุฒ ูุงู ููุฌุฑ</h1>
    <p class="lead text-muted">ูุฏุฑุช ูุงู ุจุง ูพุดุชุจุงู ฺฉุงูู ุงุฒ ุฒุจุงู ูุงุฑุณ ู ุฑุงุณุช ุจู ฺูพ (RTL)</p>
    
    <div class="alert alert-info">
        <h4><i class="fas fa-info-circle"></i> ุฏุฑุจุงุฑู ูุงุฑุณโุณุงุฒ</h4>
        <p class="mb-2">
            ุงู ุตูุญู ูุญูู ุงุณุชูุงุฏู ุงุฒ ุณุณุชู ฺูุฏุฒุจุงูู (Localization) ุฏุฑ ูุงู ููุฌุฑ ุฑุง ููุงุด ูโุฏูุฏ. 
            ูุงู ููุฌุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฌูุช ุฑุงุณุชโุจูโฺูพ (RTL) ุฑุง ุจุฑุง ุฒุจุงูโูุง ูุงุฑุณุ ุนุฑุจ ู ุนุจุฑ ูุนุงู ูโฺฉูุฏ.
        </p>
        <p class="mb-0">
            <strong>ูฺฺฏโูุง:</strong> ูพุดุชุจุงู ุงุฒ ฺูุฏ ุฒุจุงูุ ุชุบุฑ ุฎูุฏฺฉุงุฑ ุฌูุชุ ุชุฑุฌูู ฺฉุงูู ุชูุงู ุนูุงุตุฑ ุฑุงุจุท ฺฉุงุฑุจุฑ
        </p>
    </div>

    <div class="row mb-4">
        <div class="col-md-12">
            <h3 class="mb-3">ุงูุชุฎุงุจ ุฒุจุงู / Language Switcher</h3>
            <div class="btn-group mb-3" role="group">
                <button type="button" class="btn btn-outline-primary" onclick="switchLocale('en')">
                    <i class="fas fa-flag-usa"></i> English
                </button>
                <button type="button" class="btn btn-outline-primary active" onclick="switchLocale('fa')">
                    <i class="fas fa-flag"></i> ูุงุฑุณ
                </button>
            </div>
            <p class="text-muted small">
                ุจุง ฺฉูฺฉ ุจุฑ ุฑู ุฏฺฉููโูุง ุจุงูุงุ ุฒุจุงู ูุงู ููุฌุฑ ุจู ุตูุฑุช ูุญุธูโุง ุชุบุฑ ูโฺฉูุฏ.
            </p>
        </div>
    </div>
    
    <div class="demo-section">
        <h3 class="mb-3">ูุงู ููุฌุฑ ุจุง ุฒุจุงู ูุงุฑุณ</h3>
        
        <div class="card">
            <div class="card-body">
                <div id="persianFileManager"></div>
            </div>
        </div>
    </div>
    
    <div class="demo-section mt-5">
        <h3 class="mb-3">ูุงูโูุง ุฒุจุงู / Locale Files</h3>
        <p>ุณุณุชู ฺูุฏุฒุจุงูู ุงุฒ ูุงูโูุง JSON ุฏุฑ ูุณุฑ <code>/wwwroot/locales/</code> ุงุณุชูุงุฏู ูโฺฉูุฏ:</p>
        
        <ul>
            <li><code>en.json</code> - ุชุฑุฌููโูุง ุงูฺฏูุณ (English translations)</li>
            <li><code>fa.json</code> - ุชุฑุฌููโูุง ูุงุฑุณ (Persian translations)</li>
        </ul>
        
        <div class="alert alert-secondary mt-3">
            <strong>ูฺฉุชู:</strong> ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุฒุจุงู ุฌุฏุฏุ ฺฉุงู ุงุณุช ฺฉ ูุงู JSON ุจุง ฺฉุฏ ุฒุจุงู ููุฑุฏ ูุธุฑ (ูุซูุงู <code>ar.json</code> ุจุฑุง ุนุฑุจ) ุฏุฑ ูุณุฑ <code>locales/</code> ุงุฌุงุฏ ฺฉูุฏ.
        </div>
    </div>

    <div class="demo-section mt-5">
        <h3 class="mb-3">ูุญูู ุงุณุชูุงุฏู / How to Use</h3>
        <p class="mb-3">ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุณุณุชู ูุงุฑุณโุณุงุฒุ ฺฉุงู ุงุณุช ุงุณฺฉุฑูพุช i18n ุฑุง ุจุงุฑฺฏุฐุงุฑ ฺฉูุฏ ู locale ุฑุง ูุดุฎุต ฺฉูุฏ:</p>
        
        <div class="code-block">
            <pre dir="ltr" style="text-align: left;"><code>&lt;!-- ุจุงุฑฺฏุฐุงุฑ ุงุณฺฉุฑูพุช i18n --&gt;
&lt;script src="~/lib/aspnetcorefilemanager/js/filemanager-i18n.js"&gt;&lt;/script&gt;

&lt;script&gt;
// ุฑุงูโุงูุฏุงุฒ ูุงู ููุฌุฑ ุจุง ุฒุจุงู ูุงุฑุณ
document.addEventListener('DOMContentLoaded', async function() {
    const fm = new FileManager('#persianFileManager', {
        path: '/',
        view: 'largeicons',
        ajaxSettings: {
            url: '/api/FileManager/FileOperations',
            uploadUrl: '/api/FileManager/Upload',
            downloadUrl: '/api/FileManager/Download',
            getImageUrl: '/api/FileManager/GetImage'
        }
    });
    
    // ุจุงุฑฺฏุฐุงุฑ ุฒุจุงู ูุงุฑุณ
    await fm.initializeWithLocale('fa');
});
&lt;/script&gt;</code></pre>
        </div>
    </div>

    <div class="demo-section mt-5">
        <h3 class="mb-3">ุชุฑุฌููโูุง ููุฌูุฏ / Available Translations</h3>
        <p class="mb-3">ุฌุฏูู ุฒุฑ ูููููโุง ุงุฒ ฺฉูุฏูุง ู ุชุฑุฌููโูุง ููุฌูุฏ ุฏุฑ ูุงูโูุง locale ุฑุง ูุดุงู ูโุฏูุฏ:</p>
        
        <table class="table table-bordered table-striped">
            <thead class="table-light">
                <tr>
                    <th>ฺฉูุฏ / Key</th>
                    <th>ุงูฺฏูุณ / English</th>
                    <th>ูุงุฑุณ / Persian</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>toolbar.newFolder</code></td>
                    <td>New Folder</td>
                    <td>ูพูุดู ุฌุฏุฏ</td>
                </tr>
                <tr>
                    <td><code>toolbar.upload</code></td>
                    <td>Upload</td>
                    <td>ุจุงุฑฺฏุฐุงุฑ</td>
                </tr>
                <tr>
                    <td><code>toolbar.cut</code></td>
                    <td>Cut</td>
                    <td>ุจุฑุด</td>
                </tr>
                <tr>
                    <td><code>toolbar.copy</code></td>
                    <td>Copy</td>
                    <td>ฺฉูพ</td>
                </tr>
                <tr>
                    <td><code>toolbar.paste</code></td>
                    <td>Paste</td>
                    <td>ฺุณุจุงูุฏู</td>
                </tr>
                <tr>
                    <td><code>toolbar.delete</code></td>
                    <td>Delete</td>
                    <td>ุญุฐู</td>
                </tr>
                <tr>
                    <td><code>toolbar.zip</code></td>
                    <td>Create ZIP</td>
                    <td>ุณุงุฎุช ZIP</td>
                </tr>
                <tr>
                    <td><code>toolbar.unzip</code></td>
                    <td>Extract ZIP</td>
                    <td>ุงุณุชุฎุฑุงุฌ ZIP</td>
                </tr>
                <tr>
                    <td><code>messages.copiedItems</code></td>
                    <td>Copied {0} item(s)</td>
                    <td>{0} ููุฑุฏ ฺฉูพ ุดุฏ</td>
                </tr>
            </tbody>
        </table>
        
        <div class="alert alert-success mt-3">
            <strong>๐ก ูฺฉุชู:</strong> ุจุฑุง ูุดุงูุฏู ูุณุช ฺฉุงูู ุชุฑุฌููโูุงุ ูุงูโูุง <code>en.json</code> ู <code>fa.json</code> ุฑุง ุฏุฑ ูพูุดู <code>/wwwroot/lib/aspnetcorefilemanager/locales/</code> ูุดุงูุฏู ฺฉูุฏ.
        </div>
    </div>
    
    <div class="demo-section mt-5">
        <h3 class="mb-3">ูฺฺฏโูุง RTL / RTL Features</h3>
        <div class="row">
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-check-circle text-success"></i> ุฌูุช ุฎูุฏฺฉุงุฑ</h5>
                        <p class="card-text">ูุงู ููุฌุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฌูุช ุฑุงุณุช ุจู ฺูพ ุฑุง ุจุฑุง ุฒุจุงูโูุง ูุงุฑุณุ ุนุฑุจ ู ุนุจุฑ ุชุดุฎุต ุฏุงุฏู ู ูุนุงู ูโฺฉูุฏ.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-check-circle text-success"></i> ุชุฑุชุจ ุนูุงุตุฑ</h5>
                        <p class="card-text">ุชูุงู ุนูุงุตุฑ ุฑุงุจุท ฺฉุงุฑุจุฑ ุดุงูู ุฏฺฉููโูุงุ ููููุง ู ุฌุฏุงูู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุฑุง RTL ุชูุธู ูโุดููุฏ.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-check-circle text-success"></i> ูุชูโูุง ุฑุงุณุช ฺู</h5>
                        <p class="card-text">ุชูุงู ูุชูโูุง ุดุงูู ูุงู ูุงูโูุงุ ูพูุดูโูุง ู ูพุงูโูุง ุจู ุฏุฑุณุช ุฑุงุณุช ฺู ููุงุด ุฏุงุฏู ูโุดููุฏ.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title"><i class="fas fa-check-circle text-success"></i> ุขฺฉููโูุง</h5>
                        <p class="card-text">ุขฺฉููโูุง navigation ู breadcrumb ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุฑุง RTL ูุนฺฉูุณ ูโุดููุฏ.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        let currentFileManager = null;

        document.addEventListener('DOMContentLoaded', async function() {
            await initializeFileManager('fa');
        });

        async function initializeFileManager(locale) {
            // Remove existing file manager and cleanup
            const container = document.getElementById('persianFileManager');
            
            // Cleanup old instance completely
            if (currentFileManager && typeof currentFileManager.destroy === 'function') {
                currentFileManager.destroy();
            }
            
            // Clear container
            container.innerHTML = '';

            // Create new file manager
            currentFileManager = new FileManager('#persianFileManager', {
                path: '/',
                view: 'largeicons',
                ajaxSettings: {
                    url: '/api/FileManager/FileOperations',
                    uploadUrl: '/api/FileManager/Upload',
                    downloadUrl: '/api/FileManager/Download',
                    getImageUrl: '/api/FileManager/GetImage'
                },
                toolbarSettings: {
                    visible: true,
                    items: ['NewFolder', 'Upload', '|', 'Cut', 'Copy', 'Paste', '|', 'Delete', 'Download', 'Rename', '|', 'Zip', 'Unzip', '|', 'Refresh', 'View', 'Details']
                }
            });

            // Load locale and initialize
            await currentFileManager.initializeWithLocale(locale);
            currentFileManager.init();
            
            // Ensure direction is set after render
            currentFileManager.updateDirection();
        }

        async function switchLocale(locale) {
            // Update button states
            document.querySelectorAll('.btn-group button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('button').classList.add('active');

            // Reinitialize with new locale
            await initializeFileManager(locale);
        }
    </script>
}

